# ===================================================================
# ALCHEMIST HOMELAB OS - CENTRALIZED ENVIRONMENT CONFIGURATION
# ===================================================================
# This file contains all environment variables for the entire homelab stack
# Modify these values according to your setup

# === GLOBAL SETTINGS ===
COMPOSE_PROJECT_NAME=alchemist-homelab
TIMEZONE=Africa/Johannesburg
EXTERNAL_NETWORK=web
PUID=1000
PGID=1000

# === TRAEFIK REVERSE PROXY ===
TRAEFIK_IMAGE=traefik:latest
TRAEFIK_CONTAINER_NAME=traefik
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_INSECURE=true
TRAEFIK_ENTRYPOINTS_WEB_PORT=80
TRAEFIK_ENTRYPOINTS_WEBSECURE_PORT=443
TRAEFIK_ENTRYPOINTS_TRAEFIK_PORT=8080
TRAEFIK_ENTRYPOINTS_ALT_HTTP_PORT=88
TRAEFIK_ENTRYPOINTS_ALT_HTTPS_PORT=8443
TRAEFIK_PROVIDERS_DOCKER=true
TRAEFIK_PROVIDERS_DOCKER_EXPOSEDBYDEFAULT=false

# === CLOUDFLARE TUNNEL ===
CLOUDFLARED_IMAGE=cloudflare/cloudflared:latest
CLOUDFLARED_CONTAINER_NAME=cloudflared-tunnel
CLOUDFLARED_TARGET=traefik:80
# Dynamic tunnel URL (auto-populated by startup script)
CLOUDFLARED_TUNNEL_URL=https://your-tunnel-url.trycloudflare.com

# === N8N WORKFLOW AUTOMATION ===
N8N_IMAGE=n8nio/n8n:latest
N8N_CONTAINER_NAME=n8n
N8N_LOG_LEVEL=info
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false
N8N_RUNNERS_ENABLED=true
N8N_SECURE_COOKIE=false
N8N_TRUST_PROXY=true
N8N_DISABLE_PRODUCTION_MAIN_PROCESS=false
N8N_BLOCK_ENV_ACCESS_IN_NODE=false
N8N_GIT_NODE_DISABLE_BARE_REPOS=true
N8N_PAYLOAD_SIZE_MAX=16
N8N_METRICS=false
N8N_BINARY_DATA_MODE=filesystem
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
DB_SQLITE_POOL_SIZE=3
# Dynamic URLs (auto-populated by startup script from CLOUDFLARED_TUNNEL_URL)
N8N_EDITOR_BASE_URL=https://your-tunnel-url.trycloudflare.com
N8N_WEBHOOK_URL=https://your-tunnel-url.trycloudflare.com

# === SERVICE DEPENDENCIES ===
# Startup order: traefik -> cloudflared -> n8n
TRAEFIK_DEPENDS_ON=
CLOUDFLARED_DEPENDS_ON=traefik
N8N_DEPENDS_ON=traefik,cloudflared

# === TRAEFIK ROUTING LABELS ===
N8N_TRAEFIK_ENABLE=true
N8N_TRAEFIK_ROUTER_RULE=PathPrefix(`/`)
N8N_TRAEFIK_ENTRYPOINTS=web
N8N_TRAEFIK_SERVICE_PORT=5678

# === WATCHTOWER AUTO-UPDATER ===
WATCHTOWER_IMAGE=containrrr/watchtower:latest
WATCHTOWER_CONTAINER_NAME=watchtower
WATCHTOWER_SCHEDULE=0 0 4 * * *
WATCHTOWER_CLEANUP=true
WATCHTOWER_REMOVE_VOLUMES=false
WATCHTOWER_INCLUDE_STOPPED=false
WATCHTOWER_INCLUDE_RESTARTING=true
# WATCHTOWER_NOTIFICATIONS=email
WATCHTOWER_POLL_INTERVAL=86400
# Watchtower labels for selective updates
WATCHTOWER_ENABLE=true

# === FUTURE SERVICES PLACEHOLDERS ===
# Add new services here as you expand your homelab

# === MONITORING (Grafana, Prometheus) ===
# GRAFANA_IMAGE=grafana/grafana:latest
# GRAFANA_CONTAINER_NAME=grafana
# GRAFANA_ADMIN_USER=admin
# GRAFANA_ADMIN_PASSWORD=admin
# PROMETHEUS_IMAGE=prom/prometheus:latest
# PROMETHEUS_CONTAINER_NAME=prometheus

# === STORAGE (PostgreSQL, Redis) ===
# POSTGRES_IMAGE=postgres:15
# POSTGRES_CONTAINER_NAME=postgres
# POSTGRES_DB=homelab
# POSTGRES_USER=homelab
# POSTGRES_PASSWORD=changeme
# REDIS_IMAGE=redis:7-alpine
# REDIS_CONTAINER_NAME=redis

# === MEDIA (Plex, Jellyfin) ===
# PLEX_IMAGE=plexinc/pms-docker:latest
# PLEX_CONTAINER_NAME=plex
# PLEX_CLAIM_TOKEN=
# JELLYFIN_IMAGE=jellyfin/jellyfin:latest
# JELLYFIN_CONTAINER_NAME=jellyfin

# === SECURITY (Authelia, Keycloak) ===
# AUTHELIA_IMAGE=authelia/authelia:latest
# AUTHELIA_CONTAINER_NAME=authelia
# KEYCLOAK_IMAGE=quay.io/keycloak/keycloak:latest
# KEYCLOAK_CONTAINER_NAME=keycloak