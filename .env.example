# ===================================================================
# ALCHEMIST HOMELAB OS - CENTRALIZED ENVIRONMENT CONFIGURATION
# ===================================================================
# This file contains all environment variables for the entire homelab stack
# Copy this file to .env and modify values according to your setup
#
# SECURITY NOTICE: Never commit your actual .env file to version control!
# The .env file is already in .gitignore for your protection.

# === GLOBAL SETTINGS ===
COMPOSE_PROJECT_NAME=alchemist-homelab
TIMEZONE=America/New_York
EXTERNAL_NETWORK=web
PUID=1000
PGID=1000

# === TRAEFIK REVERSE PROXY ===
TRAEFIK_IMAGE=traefik:v3.0
TRAEFIK_CONTAINER_NAME=traefik
TRAEFIK_LOG_LEVEL=INFO
TRAEFIK_API_DASHBOARD=true
TRAEFIK_API_INSECURE=true
TRAEFIK_ENTRYPOINTS_WEB_PORT=80
TRAEFIK_ENTRYPOINTS_WEBSECURE_PORT=443
TRAEFIK_ENTRYPOINTS_TRAEFIK_PORT=8080
TRAEFIK_ENTRYPOINTS_ALT_HTTP_PORT=88
TRAEFIK_ENTRYPOINTS_ALT_HTTPS_PORT=8443
TRAEFIK_PROVIDERS_DOCKER=true
TRAEFIK_PROVIDERS_DOCKER_EXPOSEDBYDEFAULT=false

# === CLOUDFLARE TUNNEL ===
CLOUDFLARED_IMAGE=cloudflare/cloudflared:latest
CLOUDFLARED_CONTAINER_NAME=cloudflared-tunnel
CLOUDFLARED_TARGET=traefik:80
# Dynamic tunnel URL (auto-populated by startup script)
CLOUDFLARED_TUNNEL_URL=https://your-tunnel-url.trycloudflare.com

# === N8N WORKFLOW AUTOMATION ===
N8N_IMAGE=n8nio/n8n:latest
N8N_CONTAINER_NAME=n8n
N8N_LOG_LEVEL=info
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false
N8N_RUNNERS_ENABLED=true
N8N_SECURE_COOKIE=false
N8N_TRUST_PROXY=true
N8N_DISABLE_PRODUCTION_MAIN_PROCESS=false
N8N_BLOCK_ENV_ACCESS_IN_NODE=false
N8N_GIT_NODE_DISABLE_BARE_REPOS=true
N8N_PAYLOAD_SIZE_MAX=16
N8N_METRICS=false
N8N_BINARY_DATA_MODE=filesystem
N8N_DEFAULT_BINARY_DATA_MODE=filesystem
# Dynamic URLs (auto-populated by startup script)
N8N_EDITOR_BASE_URL=https://your-tunnel-url.trycloudflare.com
N8N_WEBHOOK_URL=https://your-tunnel-url.trycloudflare.com

# === POSTGRESQL DATABASE ===
POSTGRES_IMAGE=postgres:15
POSTGRES_CONTAINER_NAME=postgres
POSTGRES_DB=homelab
POSTGRES_USER=homelab
POSTGRES_PASSWORD=change_this_secure_password
POSTGRES_PORT=5432

# Application Database Users
N8N_DB_PASSWORD=secure_n8n_password
GRAFANA_DB_PASSWORD=secure_grafana_password
NEXTCLOUD_DB_PASSWORD=secure_nextcloud_password
WORDPRESS_DB_PASSWORD=secure_wordpress_password
AUTHENTIK_DB_PASSWORD=secure_authentik_password

# === WATCHTOWER AUTO-UPDATER ===
WATCHTOWER_IMAGE=containrrr/watchtower:latest
WATCHTOWER_CONTAINER_NAME=watchtower
WATCHTOWER_SCHEDULE=0 0 4 * * *
WATCHTOWER_CLEANUP=true
WATCHTOWER_REMOVE_VOLUMES=false
WATCHTOWER_INCLUDE_STOPPED=false
WATCHTOWER_INCLUDE_RESTARTING=true
# WATCHTOWER_NOTIFICATIONS=email
WATCHTOWER_POLL_INTERVAL=86400
WATCHTOWER_ENABLE=true

# === OLLAMA LOCAL AI API ===
OLLAMA_IMAGE=ollama/ollama:latest
OLLAMA_CONTAINER_NAME=ollama
OLLAMA_HOST=0.0.0.0
OLLAMA_ORIGINS=*
OLLAMA_PORT=11434

# === MONITORING STACK ===
GRAFANA_IMAGE=grafana/grafana:latest
GRAFANA_CONTAINER_NAME=grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=change_this_admin_password
GRAFANA_PLUGINS=grafana-piechart-panel,grafana-worldmap-panel
GRAFANA_ROOT_URL=http://localhost:3000

PROMETHEUS_IMAGE=prom/prometheus:latest
PROMETHEUS_CONTAINER_NAME=prometheus

NODE_EXPORTER_IMAGE=prom/node-exporter:latest
NODE_EXPORTER_CONTAINER_NAME=node-exporter

CADVISOR_IMAGE=gcr.io/cadvisor/cadvisor:latest
CADVISOR_CONTAINER_NAME=cadvisor

# === SERVICE DEPENDENCIES ===
# Startup order managed automatically by stack.sh
TRAEFIK_DEPENDS_ON=
CLOUDFLARED_DEPENDS_ON=traefik
N8N_DEPENDS_ON=traefik,cloudflared

# === TRAEFIK ROUTING LABELS ===
N8N_TRAEFIK_ENABLE=true
N8N_TRAEFIK_ROUTER_RULE=PathPrefix(`/`)
N8N_TRAEFIK_ENTRYPOINTS=web
N8N_TRAEFIK_SERVICE_PORT=5678

# === OPTIONAL SERVICES (Uncomment to enable) ===

# Media Services
# PLEX_IMAGE=plexinc/pms-docker:latest
# PLEX_CONTAINER_NAME=plex
# PLEX_CLAIM_TOKEN=your_plex_claim_token_here
# JELLYFIN_IMAGE=jellyfin/jellyfin:latest
# JELLYFIN_CONTAINER_NAME=jellyfin

# Security & Authentication
# AUTHELIA_IMAGE=authelia/authelia:latest
# AUTHELIA_CONTAINER_NAME=authelia
# KEYCLOAK_IMAGE=quay.io/keycloak/keycloak:latest
# KEYCLOAK_CONTAINER_NAME=keycloak
# KEYCLOAK_ADMIN=admin
# KEYCLOAK_ADMIN_PASSWORD=change_this_keycloak_password

# Additional Storage Options
# REDIS_IMAGE=redis:7-alpine
# REDIS_CONTAINER_NAME=redis
# MINIO_IMAGE=minio/minio:latest
# MINIO_CONTAINER_NAME=minio
# MINIO_ACCESS_KEY=change_this_access_key
# MINIO_SECRET_KEY=change_this_secret_key